# Invoicing App Cognito Template

This project contains an AWS CloudFormation template for setting up AWS Cognito resources for the Invoicing App. The template provisions a Cognito User Pool, Identity Pool, User Pool Client, and other necessary resources to manage user authentication and authorization.

## Project Structure

- **template.yaml**: The main CloudFormation template that defines the AWS resources.
- **samconfig.toml**: Configuration file for the AWS SAM CLI.
- **.aws-sam/**: Directory containing build artifacts generated by the AWS SAM CLI.
- **.gitignore**: Specifies files and directories to be ignored by Git.

## Resources

The following AWS resources are defined in the template:

- **UserPool**: A Cognito User Pool to manage user authentication.
- **UserIdentityPool**: A Cognito Identity Pool to manage user identities.
- **UserPoolClient**: A Cognito User Pool Client for the application.
- **UserPoolDomain**: A custom domain for the Cognito User Pool.
- **S3Bucket**: An S3 bucket to store user-related data.
- **CognitoAuthRole**: An IAM role for authenticated users.
- **IdentityPoolRoleAttachment**: Attaches the IAM role to the Identity Pool.

## Parameters

The template accepts the following parameters:

- **AppName**: Name of the application.
- **ClientDomains**: Array of domains allowed to use this User Pool.
- **CallbackURL**: Callback URL for the User Pool Client.
- **LogoutURL**: Logout URL for the User Pool Client.
- **BucketName**: Name of the S3 bucket where the signature will be stored.

## Outputs

The template provides the following outputs:

- **CognitoAuthority**: Cognito Authority URL.
- **CognitoDomain**: Cognito Domain URL.
- **AWSRegion**: AWS Region.
- **CognitoClientId**: Cognito User Pool Client ID.
- **CognitoIdentityPoolId**: Cognito Identity Pool ID.
- **CognitoResponseType**: Cognito Response Type.
- **CognitoScope**: Cognito Scope.
- **S3BucketName**: S3 Bucket Name.
- **AppName**: Application Name.
- **CognitoIdpEndpoint**: Cognito Identity Provider Endpoint.

These outputs are required to be used as environment variables in the Invoicing App frontend.

## Deployment

To build and deploy the stack, use the AWS SAM CLI:

1. Build the project:
    ```sh
    sam build
    ```

2. Deploy the stack:
    ```sh
    sam deploy --guided
    ```

This will prompt you to enter the required parameters and deploy the stack to your AWS account.

## License

This project is licensed under the MIT License.